---
description: sadf
---

# 서버리스 애플리케이션의 완성도를 높여줄 개발 가이드 A to Z

{% file src="../../../.gitbook/assets/발표자료_서버리스_애플리케이션의_완성도를_높여줄_개발_가이드_A_to_Z.pdf" %}

## 목차

1. 서버리스란
2. 이벤트



서버리스란?

효율성을 생각하는 디자인 패턴



사용자의 인프라 작업을 최소화하는...

데이터와 이벤트흐름에만 집중 가능

\-

서비스 기반 아키텍처

\-

이벤트?

"이벤트는 서버리스 어플리케이션에서 언어 역할을 수행한다"

\-

메시징 서비스를 이동하면서 느슨하게 결합된 분산 서비스 구축

\-

이벤트 소비 서비스를 여러 개 두면서 진화 가능

\-

이벤트에 담겨야 하는 정보?

EventBridge 의 예시 (json)

1. 이벤트 봉투 필드
2. 이벤트 상세 필드

\-

AWS Lambda 와 같은 이벤트 봉투에 리소스 필드 추가가 좋음 (소비자가 알 수 있어 운영 및 가시성에 유리)

\-

이벤트 상세 구조...

메타 정보를 추가하는 것이 유용함 - 여러 서십스 도메인으로 될 ㄷ경우 이벤트  흐름을 파ㄹ악하기에 유리함 (멱등성 보장 토큰으로도 활용 가능)

\-

상세 데이터 필드에는 실제 이벤트 정보 추가 - 주문 ID와 사용자 ID가 추가 (예시)

\-

서비스 간 종속성 및 밀접한 결합이 발생하여 문제가 생김

가급적 완벽한 디커플링을 추구하지만, 각 상세 정보를 조회하기 위해 다시 주문 서비스를 호출하는 커플링이 발생함

\=> 각 컨텍스트를 어떻게 해결해야 할까?

\-

필수 데이터를 추가하는 방식으로 처리

이 경우, 별도의 이벤트 스키마 형태 관리가 필요할 수도 있음

\-

이벤트 상태 전송 패턴으로 이벤트 기반 아키텍처에서 유용하게 사용 가능.

너무 많은 정보와 민감성 정보가 전송되는 건 아닌지 고려가 필요하다.

\-

\-

서비스풀 서버리스 : 코딩을 최소화 하는 것을 함축

\-

\-

경우에 따라서는 직접 통신하는 것도 고려 가능

통신 서비스 간 통합 기능을 사용하기에 서비스풀 방식이다

\-

정말 필요한 경우에만 사용해야 함 <중요>

종종 람다를 무심코 사용하지만, 먼저 AWS 서비스 간 통신이 가능한지 먼저 검토해야 한다

\-

\-

너무 많은 비즈니스 로직을 하나의 거대한 모놀리식 App 구현은 좋지 않음

\-

이를 람다에 담는다고만 해서 서버리스 아키텍처는 아님

\-

서비스풀하게 접근하여 인증, 응답캐싱, 스로틀링, 라우팅 등을 이용하고 ㅇ메시징 처리를 위해 가각ㄱ ㅏ단일 비즈니스 로직을 처리하는 방식으로 개발을 진행ㅇ해야 함.

<유연성 및 내구성>

\-

오케스트레이션과 코레오그래피를 적절히 적용시키는 방법?

서로 다른 사용 사례를 위해 둘 다 사용하는 경우가 많음

추상화 레이어를 직접 구성하기보다 AWS 서비스를 처리 가능 (서비스풀)

\-

스텝 펑션

이벤트 브릿지 (이벤트 라우터 역할) 서비스 간 이벤트 전달 역할

\-

최대한 서비스 간 통합

\-

람다 사용은 피할 수 없음

\-

동기 및 비동기 실행 모델을 모두 지원함

\-

실행 환경 구동

\-

람다 초기 실행의 콜드 스타트

콜드 스타트가 실행되는 경우...

함수 핸들러 외부에서 실행되는 건 호출되지 않음

\-

최적화를 위한 : 최대한작게 구성하여 사용

그 때 그 때 필요한 라이브러리를 호출하도록 처리

콜드 스타트 자체를 피하려면 피로비전드 동시성 : 추가비용이 발생하긴 함

\-

구체적인 하나의 라이브러리만 호출하는 것이 빠름

\-

오직 메모리 설정만 가능 - 자원에 대한 레버 역할 설정

많은 메모리 : 그에 따른 CPU 와 네트워크 대역폭이 할당됨

최대 10G -> 6vCPU 가 할당됨

람다 함수 병목 시 메모리 추가 할당으로 회피할 수 있음

\-

파워 튜너는 오픈 소스 툴로 메모리 튜닝에 대한 시각화 모델 제공

시나리오 별 성능 및 비용 수치를 제공

\-

두 개의 함수 비교도 가능, 함수 최적화 하느 과정의 전후비교 가능

추가로 EC2 Graviton2 로 실행하는 경우 실행시간 및 비용을 줄이는 경우가 있음

\-

동시성 이해 ...

각 함수 앞에 Init 이 있다 : 콜드스타트

Init 처리가 없다 : 웜 스타트

\-.-.-..-....

초당 동시성 이해

\-> 동시성을 사용자가 정의할 수 있음

AWS 계정의 리전별 동시성에서 확보됨

동시성 이상의 요청은 쓰로틀링이 발생함

예약 동시성을 설정하여 다운 스트림 서비스 부하가 가지 않도록 설정 가능

동시성 0으로 설정하여 비활성화 가능

\-

프로비전드 동시성은 cold start 를 없애기 위해 사용 가능

\-

콜드 스타트의 이해와 이에 대한 최적화 필요

\-

\-

기본적인 내부 개발 사이클 - 주로 로컬에서 처리함을 선호 (속도 등의 문제)

\-

클라우드에서는...? 테스트 등?

\-

ㄹ람다 함수는 로ㅓ컬에서 테스트 하는 것을 권장, 통합 테스트는 클라우드에서 ...

\-

AWS SAM

코딩형 인프라 기능 제공 - 트랜스폼

개발자 도구인 CLI 로 제공

\-

Accelerate : cli의 새로운 기능

주요 기능 3가지 build, sync, logs

\-

CI/CD 또한 중요

\-

널리 사용되는 ci/cd 제공 - 쉽게 구성할 수 있도록 해줌

\-

서비스 애플리ㅅ케이션의 가시성 확보 팁 - 입베디드 메트릭 포맷을 사용하면 커스템 메트릭으로 포맷 가능

커스텀 지표화하여 확인 가능

\-

클라이언트 ㄹ ㅏ이브러리의 로그를 수집하여 클라우드 와치로 전송

\-

로그 인사이트를 사용하여 최종적으로 확인하고 시각화시킬 수 있음

다양한 람다 기반의 샘플 쿼리를 제공하고 있음

\-

각종 툴을 지원하는 람다 파워툴

\-

정리인 듯 하다...

\-.-.-.-.- 끝
